<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù¾Ù†Ù„ Ú©Ø§Ù†ÙÛŒÚ¯ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</title>

<style>
body{
    font-family:tahoma;
    background:#0b132b;
    color:white;
    text-align:center;
    margin:0;
    transition:0.3s;
}
body.light{background:#f5f5f5;color:#111;}
h1{margin:20px;}

input, select{
    width:85%;
    padding:12px;
    border-radius:10px;
    border:none;
    margin:10px;
}

button{
    width:90%;
    padding:15px;
    margin:10px;
    border:none;
    border-radius:10px;
    background:#3a86ff;
    color:white;
    cursor:pointer;
}

.toggle-theme{width:auto;padding:8px 15px;background:#222;}
.guide-btn{background:#ffbe0b;color:black;}

/* âœ… Ø±Ø§Ù‡Ù†Ù…Ø§ Ø¨Ù‡ØªØ± Ø´Ø¯Ù‡ */
.guide{
    background:#14213d;
    margin:15px;
    border-radius:15px;
    text-align:right;
    line-height:2;
    max-height:0;
    overflow:hidden;
    transition:0.4s;
    font-size:14px;
}
.guide.open{
    padding:20px;
    max-height:2000px;
}

.box{background:#1c2541;margin:10px;padding:15px;border-radius:15px;}
body.light .box{background:#fff;}

.config{
    background:#0f1b3d;
    margin:8px 0;
    padding:10px;
    border-radius:10px;
    font-size:12px;
    word-break:break-all;
}
body.light .config{background:#eee;}

.copy{
    margin-top:5px;
    background:#8338ec;
    padding:6px;
    border-radius:6px;
    font-size:12px;
}

.sub{background:#06d6a0;}

.telegram-btn{
    display:block;
    width:85%;
    margin:30px auto;
    padding:15px;
    border-radius:12px;
    background:#229ED9;
    color:white;
    text-decoration:none;
}
</style>
</head>

<body>

<h1>ğŸŒ Ù¾Ù†Ù„ Ú©Ø§Ù†ÙÛŒÚ¯ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</h1>

<button class="toggle-theme" onclick="toggleTheme()">ğŸŒ™ / â˜€ï¸</button>
<button class="guide-btn" onclick="toggleGuide()">ğŸ“˜ Ø±Ø§Ù‡Ù†Ù…Ø§</button>

<!-- âœ… Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ú©Ø§Ù…Ù„ Ùˆ Ø¯Ø±Ø³Øª -->
<div id="guideBox" class="guide">

<b>ğŸ“˜ Ø¢Ù…ÙˆØ²Ø´ Ú©Ø§Ù…Ù„:</b><br><br>

1ï¸âƒ£ Ø±ÙˆÛŒ ğŸ”„ Ø¢Ù¾Ø¯ÛŒØª Ø¨Ø²Ù†<br>
2ï¸âƒ£ Ú©Ø´ÙˆØ± Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†<br>
3ï¸âƒ£ Ø±ÙˆÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¨Ø²Ù†<br>
4ï¸âƒ£ Ú©Ø§Ù†ÙÛŒÚ¯ Ø±Ùˆ Ú©Ù¾ÛŒ Ú©Ù†<br>
5ï¸âƒ£ Ø¯Ø§Ø®Ù„ Ø¨Ø±Ù†Ø§Ù…Ù‡ Import Ú©Ù† ğŸš€<br><br>

<hr>

<b>ğŸ” ÙÛŒÙ„ØªØ± Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ:</b><br>
âœ”ï¸ Ø¬Ø³ØªØ¬Ùˆ + ÙÛŒÙ„ØªØ± Ù‡Ù…Ø²Ù…Ø§Ù†<br>
âœ”ï¸ Ø§Ù†ØªØ®Ø§Ø¨ Ù†ÙˆØ¹:<br>
ğŸŸ£ VMESS<br>
ğŸŸ¢ VLESS<br>
âšªï¸ SS<br>
ğŸ”´ Trojan<br><br>

<hr>

<b>ğŸ“± Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ‡Ø§:</b><br><br>

ğŸ¤– Ø§Ù†Ø¯Ø±ÙˆÛŒØ¯:<br>
V2rayNG / NekoBox<br><br>

ğŸ Ø¢ÛŒÙÙˆÙ†:<br>
Shadowrocket / Streisand<br><br>

ğŸ’» ÙˆÛŒÙ†Ø¯ÙˆØ²:<br>
v2rayN / Nekoray<br><br>

<hr>

<b>â¬‡ï¸ Ø¯Ø§Ù†Ù„ÙˆØ¯:</b><br>
https://github.com/2dust/v2rayNG/releases<br>
https://github.com/2dust/v2rayN/releases<br><br>

<hr>

<b>âš ï¸ Ù†Ú©Ø§Øª Ù…Ù‡Ù…:</b><br>
âœ”ï¸ Ø§Ú¯Ø± VLESS ØµÙØ± Ø¨ÙˆØ¯ ÛŒØ¹Ù†ÛŒ ÙØ¹Ù„Ø§ Ø§Ø² Ù…Ù†Ø¨Ø¹ Ù†ÛŒÙˆÙ…Ø¯Ù‡<br>
âœ”ï¸ Ø¨Ø¹Ø¶ÛŒ Ú©Ø§Ù†ÙÛŒÚ¯â€ŒÙ‡Ø§ Ù…ÙˆÙ‚ØªÛŒ Ù‡Ø³ØªÙ†<br>
âœ”ï¸ Ú†Ù†Ø¯ØªØ§ ØªØ³Øª Ú©Ù†<br><br>

ğŸ”¥ Ø¨Ù‡ØªØ±ÛŒÙ† Ø§Ù†ØªØ®Ø§Ø¨:<br>
ğŸ‡ºğŸ‡¸ Ø¢Ù…Ø±ÛŒÚ©Ø§ / ğŸ‡©ğŸ‡ª Ø¢Ù„Ù…Ø§Ù†

</div>

<input type="text" id="search" placeholder="ğŸ” Ø¬Ø³ØªØ¬Ùˆ..." oninput="applyFilters()">

<select id="typeFilter" onchange="applyFilters()">
<option value="all">ğŸŒ Ù‡Ù…Ù‡</option>
<option value="vmess">ğŸŸ£ VMESS</option>
<option value="vless">ğŸŸ¢ VLESS</option>
<option value="ss">âšªï¸ SS</option>
<option value="trojan">ğŸ”´ Trojan</option>
</select>

<button onclick="loadConfigs()">ğŸ”„ Ø¢Ù¾Ø¯ÛŒØª</button>

<p id="lastUpdate">â³ Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª...</p>

<div id="countries"></div>

<a class="telegram-btn" href="https://t.me/V2raying_config" target="_blank">
ğŸš€ Ø¹Ø¶ÙˆÛŒØª Ø¯Ø± Ú©Ø§Ù†Ø§Ù„
</a>

<script>
let data = [];
let originalData = [];
let lastUpdateTime = null;

function toggleTheme(){
    document.body.classList.toggle("light");
}

function toggleGuide(){
    document.getElementById("guideBox").classList.toggle("open");
}

// Ù¾Ø±ÙˆØªÚ©Ù„
function detectType(c){
    c=c.toLowerCase();
    if(c.startsWith("vmess://")) return {type:"vmess", icon:"ğŸŸ£"};
    if(c.startsWith("vless://")) return {type:"vless", icon:"ğŸŸ¢"};
    if(c.startsWith("ss://")) return {type:"ss", icon:"âšªï¸"};
    if(c.startsWith("trojan://")) return {type:"trojan", icon:"ğŸ”´"};
    return {type:"other", icon:"âš«"};
}

// Ú©Ø´ÙˆØ±
function detectCountry(l){
    l=l.toLowerCase();
    if(l.includes("us")||l.includes("america")||l.includes("ğŸ‡ºğŸ‡¸")) return "ğŸ‡ºğŸ‡¸ Ø¢Ù…Ø±ÛŒÚ©Ø§";
    if(l.includes("de")||l.includes("germany")||l.includes("ğŸ‡©ğŸ‡ª")) return "ğŸ‡©ğŸ‡ª Ø¢Ù„Ù…Ø§Ù†";
    return null;
}

async function loadConfigs(){
    document.getElementById("countries").innerHTML="â³...";

    try{
        const urls=[
            "https://raw.githubusercontent.com/mahdibland/V2RayAggregator/master/sub/sub_merge.txt",
            "https://raw.githubusercontent.com/soroushmirzaei/telegram-configs-collector/main/protocols/vless",
            "https://raw.githubusercontent.com/soroushmirzaei/telegram-configs-collector/main/protocols/vmess"
        ];

        let all="";

        for(let u of urls){
            try{
                let r=await fetch(u+"?"+Date.now());
                let t=await r.text();
                all+=t+"\n";
            }catch(e){}
        }

        let lines=all.split("\n");

        let us=[],de=[];

        lines.forEach(c=>{
            c=c.trim();
            if(!c) return;

            let obj=detectType(c);
            if(obj.type==="other") return;

            let country=detectCountry(c);

            if(country==="ğŸ‡ºğŸ‡¸ Ø¢Ù…Ø±ÛŒÚ©Ø§") us.push(c);
            if(country==="ğŸ‡©ğŸ‡ª Ø¢Ù„Ù…Ø§Ù†") de.push(c);
        });

        data=[
            {name:"ğŸ‡ºğŸ‡¸ Ø¢Ù…Ø±ÛŒÚ©Ø§",configs:us.slice(0,20)},
            {name:"ğŸ‡©ğŸ‡ª Ø¢Ù„Ù…Ø§Ù†",configs:de.slice(0,20)}
        ];

        originalData=JSON.parse(JSON.stringify(data));

        lastUpdateTime=new Date();
        updateClock();
        setTimeout(updateClock,1000);

        applyFilters();

    }catch(e){
        document.getElementById("countries").innerHTML="âŒ Ø®Ø·Ø§";
    }
}

function updateClock(){
    let el=document.getElementById("lastUpdate");

    if(!lastUpdateTime){
        el.innerText="â³...";
        return;
    }

    let diff=Math.floor((new Date()-lastUpdateTime)/1000);

    let t="";
    if(diff<10) t="Ú†Ù†Ø¯ Ù„Ø­Ø¸Ù‡ Ù¾ÛŒØ´";
    else if(diff<60) t=diff+" Ø«Ø§Ù†ÛŒÙ‡ Ù¾ÛŒØ´";
    else if(diff<3600) t=Math.floor(diff/60)+" Ø¯Ù‚ÛŒÙ‚Ù‡ Ù¾ÛŒØ´";
    else t=Math.floor(diff/3600)+" Ø³Ø§Ø¹Øª Ù¾ÛŒØ´";

    el.innerText="ğŸ•’ "+t;
}

setInterval(updateClock,60000);

function applyFilters(){
    let s=document.getElementById("search").value.toLowerCase();
    let type=document.getElementById("typeFilter").value;

    data=originalData.map(c=>{
        let f=c.configs.filter(x=>{
            let m1=x.toLowerCase().includes(s)||c.name.toLowerCase().includes(s);
            let m2=(type==="all")||detectType(x).type===type;
            return m1&&m2;
        });
        return {name:c.name,configs:f};
    });

    showCountries();
}

function showCountries(){
    let html="";

    data.forEach((c,i)=>{
        html+=`
        <div class="box">
        <h3>${c.name} (${c.configs.length})</h3>

        <button onclick="toggleConfigs(${i})">ğŸ“‚ Ù†Ù…Ø§ÛŒØ´</button>
        <button class="sub" onclick="copySub(${i})">ğŸ“¡ Ø³Ø§Ø¨</button>

        <div id="list${i}"></div>
        </div>`;
    });

    document.getElementById("countries").innerHTML=html;
}

function toggleConfigs(i){
    let el=document.getElementById("list"+i);

    if(el.innerHTML!=""){el.innerHTML="";return;}

    let html="";
    data[i].configs.forEach(c=>{
        html+=`
        <div class="config">
        ${detectType(c).icon} ${c}
        <button class="copy" onclick="copyConfig('${c}')">Ú©Ù¾ÛŒ</button>
        </div>`;
    });

    el.innerHTML=html;
}

function copyConfig(t){
    navigator.clipboard.writeText(t);
    alert("Ú©Ù¾ÛŒ Ø´Ø¯");
}

function copySub(i){
    navigator.clipboard.writeText(data[i].configs.join("\n"));
    alert("Ú©Ù¾ÛŒ Ø´Ø¯");
}

setInterval(loadConfigs,300000);
loadConfigs();
</script>

</body>
</html>
