<!DOCTYPE html><html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§</title><style>
body{margin:0;font-family:sans-serif;background:#0b132b;color:#fff;direction: rtl;}
.container{padding:15px;max-width:500px;margin:auto;}
h1{text-align:center;}
input{width:100%;padding:12px;border:none;border-radius:20px;margin-bottom:10px;}
button{width:100%;padding:12px;border:none;border-radius:20px;margin-bottom:10px;color:#fff;cursor:pointer;}
.update{background:linear-gradient(45deg,#00c6ff,#0072ff);}
.country{background:linear-gradient(45deg,#ff7e5f,#feb47b);}
.telegram{background:linear-gradient(45deg,#0088cc,#00aced);}
.card{display:flex;justify-content:space-between;align-items:center;background:#1c2541;margin:8px 0;padding:10px;border-radius:15px;font-size:12px;}
.text{width:70%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}
.copy{background:linear-gradient(45deg,#7f00ff,#e100ff);}
.list{max-height:0;overflow:hidden;transition:max-height 0.4s ease;}
.list.open{max-height:2000px;}
</style></head><body><div class="container">
<h1>ğŸŒ Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§</h1><button class="telegram" onclick="openTelegram()">ğŸ“¢ Ú©Ø§Ù†Ø§Ù„ ØªÙ„Ú¯Ø±Ø§Ù…</button>

<input type="text" id="search" placeholder="ğŸ” Ø¬Ø³ØªØ¬Ùˆ..." oninput="searchConfigs()"><button class="update" onclick="loadConfigs()">ğŸ”„ Ø¢Ù¾Ø¯ÛŒØª</button>

<div id="lastUpdate"></div>
<div id="countries"></div>
</div><script>

let data = [];
let opened = null;

function openTelegram(){
    window.open("https://t.me/V2raying_config","_blank");
}

function getIranTime(){
    return new Date().toLocaleTimeString("fa-IR",{timeZone:"Asia/Tehran"});
}

async function loadConfigs(){

    document.getElementById("countries").innerHTML = "â³ Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª...";

    try{

        const proxy = "https://api.allorigins.win/raw?url=";

        const urls = [
            "https://raw.githubusercontent.com/v2fly/free-nodes/main/sub",
            "https://raw.githubusercontent.com/mahdibland/V2RayAggregator/master/sub/sub_merge_base64.txt"
        ];

        let allConfigs = [];

        for(let u of urls){
            const res = await fetch(proxy + encodeURIComponent(u));
            const text = await res.text();
            const decoded = atob(text.trim());
            allConfigs = allConfigs.concat(decoded.split("\n"));
        }

        allConfigs = [...new Set(allConfigs)];

        let usa=[], germany=[];

        allConfigs.forEach(cfg=>{
            let c = cfg.toLowerCase();
            if(c.includes("us")) usa.push(cfg);
            if(c.includes("de")) germany.push(cfg);
        });

        data = [
            {name:"Ø¢Ù…Ø±ÛŒÚ©Ø§",configs:usa.slice(0,50)},
            {name:"Ø¢Ù„Ù…Ø§Ù†",configs:germany.slice(0,50)}
        ];

        showTime();
        showCountries();

    }catch(e){
        document.getElementById("countries").innerHTML = "âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª";
        console.log(e);
    }
}

function showTime(){
    document.getElementById("lastUpdate").innerText =
    "Ø¢Ø®Ø±ÛŒÙ† Ø¢Ù¾Ø¯ÛŒØª: "+getIranTime();
}

function showCountries(){
    const div=document.getElementById("countries");
    div.innerHTML="";

    data.forEach(c=>{
        const wrap=document.createElement("div");
        const btn=document.createElement("button");

        let flag=c.name.includes("Ø¢Ù…Ø±ÛŒÚ©Ø§")?"ğŸ‡ºğŸ‡¸ ":"ğŸ‡©ğŸ‡ª ";
        btn.className="country";
        btn.innerText=flag+c.name+" ("+c.configs.length+")";

        const list=document.createElement("div");
        list.className="list";

        btn.onclick=()=>{
            if(opened&&opened!==list) opened.classList.remove("open");
            list.classList.toggle("open");
            opened=list;
        };

        const allBtn=document.createElement("button");
        allBtn.className="update";
        allBtn.innerText="ğŸ“‹ Ú©Ù¾ÛŒ Ù‡Ù…Ù‡";
        allBtn.onclick=()=>{navigator.clipboard.writeText(c.configs.join("\n"));alert("Ú©Ù¾ÛŒ Ø´Ø¯");};
        list.appendChild(allBtn);

        c.configs.forEach(cfg=>{
            const card=document.createElement("div");
            card.className="card";

            const text=document.createElement("div");
            text.className="text";
            text.innerText=cfg;

            const copy=document.createElement("button");
            copy.className="copy";
            copy.innerText="Ú©Ù¾ÛŒ";
            copy.onclick=()=>{navigator.clipboard.writeText(cfg);alert("Ú©Ù¾ÛŒ Ø´Ø¯");};

            card.appendChild(text);
            card.appendChild(copy);
            list.appendChild(card);
        });

        wrap.appendChild(btn);
        wrap.appendChild(list);
        div.appendChild(wrap);
    });
}

function searchConfigs(){
    const v=document.getElementById("search").value.toLowerCase();
    document.querySelectorAll("#countries > div").forEach(w=>{
        w.style.display = w.innerText.toLowerCase().includes(v) ? "block":"none";
    });
}

loadConfigs();

</script></body>
</html>
