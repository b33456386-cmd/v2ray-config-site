<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§</title>

<style>
body{
    margin:0;
    font-family:sans-serif;
    background:#0b132b;
    color:#fff;
    direction: rtl;
}
.container{
    padding:15px;
    max-width:500px;
    margin:auto;
}
h1{
    text-align:center;
}
input{
    width:100%;
    padding:12px;
    border:none;
    border-radius:20px;
    margin-bottom:10px;
}
button{
    width:100%;
    padding:12px;
    border:none;
    border-radius:20px;
    margin-bottom:10px;
    color:#fff;
    cursor:pointer;
}
.update{
    background:linear-gradient(45deg,#00c6ff,#0072ff);
}
.country{
    background:linear-gradient(45deg,#ff7e5f,#feb47b);
}
.telegram{
    background:linear-gradient(45deg,#0088cc,#00aced);
}
.card{
    display:flex;
    justify-content:space-between;
    align-items:center;
    background:#1c2541;
    margin:8px 0;
    padding:10px;
    border-radius:15px;
    font-size:12px;
}
.text{
    width:70%;
    overflow:hidden;
    white-space:nowrap;
    text-overflow:ellipsis;
}
.copy{
    background:linear-gradient(45deg,#7f00ff,#e100ff);
}
.list{
    max-height:0;
    overflow:hidden;
    transition:max-height 0.4s ease;
}
.list.open{
    max-height:1000px;
}
</style>
</head>

<body>

<div class="container">
    <h1>ğŸŒ Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§</h1>

    <button class="telegram" onclick="openTelegram()">ğŸ“¢ Ú©Ø§Ù†Ø§Ù„ ØªÙ„Ú¯Ø±Ø§Ù…</button>

    <input type="text" id="search" placeholder="ğŸ” Ø¬Ø³ØªØ¬Ùˆ Ú©Ø´ÙˆØ± ÛŒØ§ Ú©Ø§Ù†ÙÛŒÚ¯..." oninput="searchConfigs()">

    <button class="update" onclick="loadConfigs()">ğŸ”„ Ø¢Ù¾Ø¯ÛŒØª</button>

    <div id="lastUpdate"></div>

    <div id="countries"></div>
</div>

<script>

let data = [];
let opened = null;

// Ù„ÛŒÙ†Ú© ØªÙ„Ú¯Ø±Ø§Ù…
function openTelegram(){
    window.open("https://t.me/V2raying_config","_blank");
}

// Ø¯ÛŒØªØ§ Ù„ÙˆÚ©Ø§Ù„
function loadConfigs(){

    data = [
        {
            name: "Ø¢Ù…Ø±ÛŒÚ©Ø§",
            configs: [
                "vless://usa-1",
                "vless://usa-2",
                "vless://usa-3"
            ]
        },
        {
            name: "Ø¢Ù„Ù…Ø§Ù†",
            configs: [
                "vless://germany-1",
                "vless://germany-2",
                "vless://germany-3"
            ]
        }
    ];

    showTime();
    showCountries();
}

function getIranTime(){
    return new Date().toLocaleTimeString("fa-IR", {
        timeZone: "Asia/Tehran"
    });
}

function showTime(){
    document.getElementById("lastUpdate").innerText =
        "Ø¢Ø®Ø±ÛŒÙ† Ø¢Ù¾Ø¯ÛŒØª: " + getIranTime();
}

function showCountries(){
    const div = document.getElementById("countries");
    div.innerHTML = "";

    data.forEach((c)=>{
        const wrapper = document.createElement("div");

        const btn = document.createElement("button");

        let flag = "";
        if(c.name.includes("Ø¢Ù…Ø±ÛŒÚ©Ø§")) flag = "ğŸ‡ºğŸ‡¸ ";
        if(c.name.includes("Ø¢Ù„Ù…Ø§Ù†")) flag = "ğŸ‡©ğŸ‡ª ";

        btn.className = "country";
        btn.innerText = flag + c.name + " ("+c.configs.length+")";

        const list = document.createElement("div");
        list.className = "list";

        btn.onclick = ()=>{
            if(opened && opened !== list){
                opened.classList.remove("open");
            }
            list.classList.toggle("open");
            opened = list;
        };

        const allBtn = document.createElement("button");
        allBtn.className = "update";
        allBtn.innerText = "ğŸ“‹ Ú©Ù¾ÛŒ Ù‡Ù…Ù‡";
        allBtn.onclick = ()=>{
            navigator.clipboard.writeText(c.configs.join("\n"));
            alert("Ú©Ù¾ÛŒ Ø´Ø¯");
        };
        list.appendChild(allBtn);

        c.configs.forEach(cfg=>{
            const card = document.createElement("div");
            card.className = "card";

            const text = document.createElement("div");
            text.className = "text";
            text.innerText = cfg;

            const copyBtn = document.createElement("button");
            copyBtn.className = "copy";
            copyBtn.innerText = "Ú©Ù¾ÛŒ";
            copyBtn.onclick = ()=>{
                navigator.clipboard.writeText(cfg);
                alert("Ú©Ù¾ÛŒ Ø´Ø¯");
            };

            card.appendChild(text);
            card.appendChild(copyBtn);
            list.appendChild(card);
        });

        wrapper.appendChild(btn);
        wrapper.appendChild(list);
        div.appendChild(wrapper);
    });
}

// Ø¬Ø³ØªØ¬Ùˆ (Ú©Ø´ÙˆØ± + Ú©Ø§Ù†ÙÛŒÚ¯)
function searchConfigs(){
    const value = document.getElementById("search").value.toLowerCase();

    const wrappers = document.querySelectorAll("#countries > div");

    wrappers.forEach(wrapper=>{
        const countryBtn = wrapper.querySelector("button");
        const cards = wrapper.querySelectorAll(".card");

        let countryMatch = countryBtn.innerText.toLowerCase().includes(value);
        let anyConfigMatch = false;

        cards.forEach(card=>{
            const text = card.innerText.toLowerCase();
            const match = text.includes(value);

            card.style.display = match ? "flex" : "none";
            if(match) anyConfigMatch = true;
        });

        wrapper.style.display = (countryMatch || anyConfigMatch) ? "block" : "none";
    });
}

// Ø§Ø¬Ø±Ø§
loadConfigs();

</script>

</body>
</html>
