<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>V2Ray Configs</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<header class="header">
  <h1>ğŸŒ Ú©Ø§Ù†ÙÛŒÚ¯â€ŒÙ‡Ø§ÛŒ V2Ray</h1>

  <div class="top-bar">
    <input type="text" id="search" placeholder="ğŸ” Ø¬Ø³ØªØ¬Ùˆ Ú©Ø´ÙˆØ± ÛŒØ§ Ú©Ø§Ù†ÙÛŒÚ¯...">

    <div class="controls">
      <button id="darkToggle">ğŸŒ™</button>
      <button id="updateBtn">ğŸ”„ Ø¢Ù¾Ø¯ÛŒØª</button>
      <label class="switch">
        <input type="checkbox" id="autoUpdate">
        <span>Ø¢Ù¾Ø¯ÛŒØª Ø®ÙˆØ¯Ú©Ø§Ø±</span>
      </label>
    </div>
  </div>

  <div class="info">
    <span id="time"></span>
  </div>
</header>

<main class="container">

  <!-- ğŸ‡ºğŸ‡¸ Ø¢Ù…Ø±ÛŒÚ©Ø§ -->
  <section class="country">
    <h2>ğŸ‡ºğŸ‡¸ Ø¢Ù…Ø±ÛŒÚ©Ø§ (<span id="usCount">0</span>)</h2>
    <div class="configs" id="usConfigs"></div>
  </section>

  <!-- ğŸ‡©ğŸ‡ª Ø¢Ù„Ù…Ø§Ù† -->
  <section class="country">
    <h2>ğŸ‡©ğŸ‡ª Ø¢Ù„Ù…Ø§Ù† (<span id="deCount">0</span>)</h2>
    <div class="configs" id="deConfigs"></div>
  </section>

</main>

<!-- ØªÙ„Ú¯Ø±Ø§Ù… -->
<footer class="footer">
  <a href="https://t.me/V2raying_config" target="_blank" class="telegram">
    <img src="https://cdn-icons-png.flaticon.com/512/2111/2111646.png" alt="telegram">
    Ú©Ø§Ù†Ø§Ù„ ØªÙ„Ú¯Ø±Ø§Ù…
  </a>
</footer>

<script>
const usConfigs = [
  "config-us-1",
  "config-us-2"
];

const deConfigs = [
  "config-de-1",
  "config-de-2"
];

function renderConfigs() {
  const usBox = document.getElementById("usConfigs");
  const deBox = document.getElementById("deConfigs");

  usBox.innerHTML = "";
  deBox.innerHTML = "";

  usConfigs.forEach(c => {
    usBox.innerHTML += createCard(c);
  });

  deConfigs.forEach(c => {
    deBox.innerHTML += createCard(c);
  });

  document.getElementById("usCount").innerText = usConfigs.length;
  document.getElementById("deCount").innerText = deConfigs.length;
}

function createCard(config) {
  return `
    <div class="card">
      <p>${config}</p>
      <button onclick="copyConfig('${config}')">ğŸ“‹ Ú©Ù¾ÛŒ</button>
    </div>
  `;
}

function copyConfig(text) {
  navigator.clipboard.writeText(text);
  alert("Ú©Ù¾ÛŒ Ø´Ø¯ âœ…");
}

// Ø³Ø±Ú†
document.getElementById("search").addEventListener("input", function() {
  const value = this.value.toLowerCase();
  document.querySelectorAll(".card").forEach(card => {
    card.style.display = card.innerText.toLowerCase().includes(value) ? "block" : "none";
  });
});

// Ø¯Ø§Ø±Ú© Ù…ÙˆØ¯
document.getElementById("darkToggle").onclick = () => {
  document.body.classList.toggle("dark");
};

// Ø³Ø§Ø¹Øª Ø§ÛŒØ±Ø§Ù†
function updateTime() {
  const now = new Date().toLocaleString("fa-IR", { timeZone: "Asia/Tehran" });
  document.getElementById("time").innerText = "ğŸ•’ " + now;
}
setInterval(updateTime, 1000);
updateTime();

// Ø¯Ú©Ù…Ù‡ Ø¢Ù¾Ø¯ÛŒØª
document.getElementById("updateBtn").onclick = () => {
  renderConfigs();
};

// Ø¢Ù¾Ø¯ÛŒØª Ø®ÙˆØ¯Ú©Ø§Ø±
setInterval(() => {
  if (document.getElementById("autoUpdate").checked) {
    renderConfigs();
  }
}, 10000);

renderConfigs();
</script>

</body>
</html>
