<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Ú©Ø§Ù†ÙÛŒÚ¯â€ŒÙ‡Ø§ÛŒ V2Ray</title>

<style>
body{
    margin:0;
    font-family:sans-serif;
    background:#0b132b;
    color:#fff;
    direction: rtl;
}

.container{
    padding:15px;
    max-width:500px;
    margin:auto;
}

h1{
    text-align:center;
}

input{
    width:100%;
    padding:12px;
    border:none;
    border-radius:20px;
    margin-bottom:10px;
}

button{
    width:100%;
    padding:12px;
    border:none;
    border-radius:20px;
    margin-bottom:10px;
    color:#fff;
    font-size:16px;
}

.update{
    background:linear-gradient(45deg,#00c6ff,#0072ff);
}

.country{
    background:linear-gradient(45deg,#ff7e5f,#feb47b);
}

.card{
    display:flex;
    justify-content:space-between;
    align-items:center;
    background:#1c2541;
    margin:8px 0;
    padding:10px;
    border-radius:15px;
    font-size:12px;
}

.text{
    width:75%;
    overflow:hidden;
    text-overflow:ellipsis;
    white-space:nowrap;
}

.copy{
    background:linear-gradient(45deg,#7f00ff,#e100ff);
    border:none;
    padding:8px 12px;
    border-radius:10px;
    color:#fff;
}
</style>

</head>

<body>

<div class="container">

<h1>ğŸŒ Ú©Ø§Ù†ÙÛŒÚ¯â€ŒÙ‡Ø§</h1>

<input type="text" id="search" placeholder="Ø¬Ø³ØªØ¬Ùˆ...">

<button class="update" onclick="loadConfigs()">ğŸ”„ Ø¢Ù¾Ø¯ÛŒØª</button>

<div id="countries"></div>

<div id="configs"></div>

</div>

<script>
let data = [];

async function loadConfigs(){
    document.getElementById("countries").innerHTML = "Ø¯Ø± Ø­Ø§Ù„ Ù„ÙˆØ¯...";
    document.getElementById("configs").innerHTML = "";

    try{
        const res = await fetch("configs.json?" + Date.now());
        const json = await res.json();

        // ÙÙ‚Ø· Ø¢Ù…Ø±ÛŒÚ©Ø§ Ùˆ Ø¢Ù„Ù…Ø§Ù†
        data = json.countries.filter(c => 
            c.name.includes("Ø¢Ù…Ø±ÛŒÚ©Ø§") || c.name.includes("Ø¢Ù„Ù…Ø§Ù†")
        );

        showCountries();

    }catch(e){
        document.getElementById("countries").innerHTML = "Ø®Ø·Ø§ âŒ";
    }
}

function showCountries(){
    const div = document.getElementById("countries");
    div.innerHTML = "";

    data.forEach(c=>{
        const btn = document.createElement("button");
        btn.className = "country";
        btn.innerText = c.name + " ("+c.count+")";
        btn.onclick = ()=> showConfigs(c);
        div.appendChild(btn);
    });
}

function showConfigs(country){
    const div = document.getElementById("configs");
    div.innerHTML = "";

    // Ø¯Ú©Ù…Ù‡ Ú©Ù¾ÛŒ Ù‡Ù…Ù‡
    const allBtn = document.createElement("button");
    allBtn.className = "update";
    allBtn.innerText = "ğŸ“‹ Ú©Ù¾ÛŒ Ù‡Ù…Ù‡";
    allBtn.onclick = ()=>{
        navigator.clipboard.writeText(country.configs.join("\n"));
        alert("Ú©Ù¾ÛŒ Ø´Ø¯ âœ…");
    };
    div.appendChild(allBtn);

    country.configs.forEach(c=>{
        const card = document.createElement("div");
        card.className = "card";

        const text = document.createElement("div");
        text.className = "text";
        text.innerText = c;

        const btn = document.createElement("button");
        btn.className = "copy";
        btn.innerText = "Ú©Ù¾ÛŒ";
        btn.onclick = ()=>{
            navigator.clipboard.writeText(c);
            alert("Ú©Ù¾ÛŒ Ø´Ø¯");
        };

        card.appendChild(text);
        card.appendChild(btn);
        div.appendChild(card);
    });
}

// Ù„ÙˆØ¯ Ø§ÙˆÙ„ÛŒÙ‡
loadConfigs();
</script>

</body>
</html>
