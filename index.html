<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù¾Ù†Ù„ Ú©Ø§Ù†ÙÛŒÚ¯</title>

<style>
body{
    font-family:tahoma;
    background:#0b132b;
    color:white;
    text-align:center;
    margin:0;
}
h1{margin:20px;}
button{
    width:90%;
    padding:15px;
    margin:10px;
    border:none;
    border-radius:10px;
    font-size:16px;
    background:#3a86ff;
    color:white;
}
.box{
    background:#1c2541;
    margin:10px;
    padding:10px;
    border-radius:10px;
}
</style>
</head>

<body>

<h1>ğŸŒ Ù¾Ù†Ù„ Ú©Ø§Ù†ÙÛŒÚ¯</h1>

<button onclick="loadConfigs()">ğŸ”„ Ø¢Ù¾Ø¯ÛŒØª</button>

<div id="countries">Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª...</div>

<script>
let data = [];

async function loadConfigs(){
    document.getElementById("countries").innerHTML="â³ Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª...";

    try{
        // ğŸ”¥ Ø³ÙˆØ±Ø³ Ø±Ø§ÛŒÚ¯Ø§Ù† Ú©Ø§Ù†ÙÛŒÚ¯
        const res = await fetch("https://raw.githubusercontent.com/barry-far/V2ray-Configs/main/Sub1.txt?" + Date.now());
        const text = await res.text();

        const lines = text.split("\n");

        let usa = [];
        let germany = [];

        lines.forEach(line=>{
            if(line.includes("US") || line.includes("United States")){
                usa.push(line);
            }
            if(line.includes("DE") || line.includes("Germany")){
                germany.push(line);
            }
        });

        data = [
            {name:"ğŸ‡ºğŸ‡¸ Ø¢Ù…Ø±ÛŒÚ©Ø§", configs: usa.slice(0,10)},
            {name:"ğŸ‡©ğŸ‡ª Ø¢Ù„Ù…Ø§Ù†", configs: germany.slice(0,10)}
        ];

        showCountries();

    }catch(e){
        document.getElementById("countries").innerHTML="âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª";
    }
}

function showCountries(){
    let html="";

    data.forEach(country=>{
        html+=`
        <div class="box">
            <h3>${country.name} (${country.configs.length})</h3>
            <button onclick='showConfigs(${JSON.stringify(country.configs)})'>
                Ù†Ù…Ø§ÛŒØ´ Ú©Ø§Ù†ÙÛŒÚ¯â€ŒÙ‡Ø§
            </button>
        </div>
        `;
    });

    document.getElementById("countries").innerHTML=html;
}

function showConfigs(configs){
    let text=configs.join("\n\n");
    alert(text);
}

// â± Ù‡Ø± Û³ Ø³Ø§Ø¹Øª Ø¢Ù¾Ø¯ÛŒØª Ø®ÙˆØ¯Ú©Ø§Ø±
setInterval(loadConfigs, 10800000);

// Ø§Ø¬Ø±Ø§ Ø§ÙˆÙ„ÛŒÙ‡
loadConfigs();
</script>

</body>
</html>
